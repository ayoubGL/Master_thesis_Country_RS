<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Your Destination</title>

    <!-- CSS -->
    {% load staticfiles %} {% load crispy_forms_tags %} {% load crispy_forms_field %}


    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,600">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css">
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css'%}">
    <link rel="stylesheet" href="{% static 'css/media-queries.css' %}">


    <!-- --------------------------- star -->
    <link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">
    <script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
    <!-- --------------------------- -->

    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" href="{% static 'ico/favicon.png'%}">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{% static 'ico/apple-touch-icon-144-precomposed.png' %}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{% static 'ico/apple-touch-icon-114-precomposed.png'%}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{% static 'ico/apple-touch-icon-72-precomposed.png' %}">
    <link rel="apple-touch-icon-precomposed" href="{% static 'ico/apple-touch-icon-57-precomposed.png'%}">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
    </script>
    <script type="text/javascript" language="javascript">
        //----- at least 5 countries -----------
        function validateForm() {
            var c0 = document.forms["myForm"]["form-0-countries_name_id"].value;
            var c1 = document.forms["myForm"]["form-1-countries_name_id"].value;
            var c2 = document.forms["myForm"]["form-2-countries_name_id"].value;
            var c3 = document.forms["myForm"]["form-3-countries_name_id"].value;
            var c4 = document.forms["myForm"]["form-4-countries_name_id"].value;

            var r0 = document.forms["myForm"]["form-0-country_rating"].value;
            var r1 = document.forms["myForm"]["form-1-country_rating"].value;
            var r2 = document.forms["myForm"]["form-2-country_rating"].value;
            var r3 = document.forms["myForm"]["form-3-country_rating"].value;
            var r4 = document.forms["myForm"]["form-4-country_rating"].value;





            if (c0 == "" || c1 == "" || c2 == "" || c3 == "" || c4 == "" || r0 == "" || r1 == "" || r2 == "" || r4 == "") {
                document.getElementById('error').innerHTML = " Please rate at least 5 countries";
                return false;
            } else {
                return true;
            }

        };

        //-------------- Countries duplication test  
        $(function() {
            var s = new RegExp()

            $("select[name*='form-']").change(function() {

                var $current = $(this);

                $("select[name*='form-']").each(function() {
                    if ($(this).val() == $current.val() && $(this).attr('id') != $current.attr('id')) {
                        $current.val('');
                        return false;
                    } else {
                        return true;
                    }

                });
            });
        });
    </script>
    <script type="text/javascript">
        /*Scroll to top when arrow up clicked BEGIN*/
        $(window).scroll(function() {
            var height = $(window).scrollTop();
            if (height > 100) {
                $('#back2Top').fadeIn();
            } else {
                $('#back2Top').fadeOut();
            }
        });
        $(document).ready(function() {
            $("#back2Top").click(function(event) {
                event.preventDefault();
                $("html, body").animate({
                    scrollTop: 0
                }, "slow");
                return false;
            });

        });
        /*Scroll to top when arrow up clicked END*/
    </script>


</head>

<body id="page-top" style="background-color: rgba(253, 253, 253, 0.945);">
    <!-- Navigation -->


    <!-- <div class="navbar-fixed container-fluid"> -->
    <div>
        <nav class="navbar navbar-dark fixed-top navbar-expand-md navbar-no-bg " role="navigation ">
            <div class="container-fluid">
                <div class="navbar-header ">
                    <a href="{% url 'thesis_app:home' %} " class="brand-logo "><img src="{% static 'img/logo.png' %} " alt=" " width="140 "></a>
                </div>
                <div class="navbar-collapse " id="navbarNav ">
                    <ul class="nav navbar-nav ml-auto ">
                        <li class="nav-item">
                            <span> <a class="nav-link btn btn-outline-secondary " href="{% url 'thesis_app:howWorks' %} ">
                                                                        <h5>How Works</h5>
                                                                    
                                                                    
                                                                    </a></span>
                        </li>
                        <li class="nav-item">
                            {% if user.is_authenticated %}
                            <span>
                                                                        <a class="nav-link btn btn-outline-secondary " href="{% url 'logout' %} ">
                                                                            <h5>Logout</h5>
                                                                        </a>
                                                                    </span> {% else %}<span>
                                                                    <a class="nav-link btn btn-outline-secondary " href="{% url 'login' %} ">
                                                                        <h5>Login</h5>
                                                                    </a> </span>{% endif %}

                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- </div> -->

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div class="container-fluid">
        <!-- ------------------------------------------------------------------- -->

        <div class="container " style="color:#000000; ">
            <br>
            <div class="col-lg-12 col-lg-offset-4">
                <br>
                <div class="div-cl-4">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 50%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
                            <b class="font-weight-bold" style="font-size: 15px;">Step 3 out of 5</b>
                        </div>
                    </div>
                    <br>
                    <br>
                    <h3>Rate 'em! ? </h3>
                    <br>
                    <h4>Please rate as much as you can (but at least 5 countries). You can click on the button “ADD MORE” to display more countries that you possibly know.</h4>
                    <br>
                    <br>

                    <fieldset>
                        <form method="POST" action="" name="myForm" onsubmit="return validateForm()">
                            <br>{% csrf_token %} {{ formset.management_form|crispy }}
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col font-weight-bold"> Country Name <i class="text-primary ">*</i></div>
                                    <div class="col font-weight-bold">Your Rating <i class="text-primary ">*</i>
                                    </div>
                                </div>
                                <br>
                                <br> {% for frm in formset %}
                                <div class="row">
                                    <div class="col" style=" border-top:0;">
                                        {{frm.countries_name_id|as_crispy_field}}

                                    </div>
                                    <div class="col">
                                        {{frm.country_rating}}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <input title="add countries" type="submit" name="Add_More" value="ADD MORE" class="btn btn-info btn-lg font-weight-bold" />
                            <br>
                            <br>
                            <div class="container">
                                <div style="color: #ec0c0c;font-size: 20px !important;" id="error"></div>
                                <div style="color: #ec0c0c;font-size: 20px !important;" id="error_2"></div>
                                <br>
                            </div>
                            <br>
                            <br>
                            <button type="submit" name="submit" class="btn btn-block btn-outline-info"> <i><h5 class=" font-weight-bold"><br>SUBMIT MY RATINGS<br></h5></i></button>
                        </form>
                    </fieldset>

                    <br>


                </div>

            </div>
        </div>

    </div>

    <br>
    <br>
    <br>
    <a id="back2Top" title="Back to top" href="#">&#10148;</a>

    <footer class="footer-container ">

        <div class="container ">
            <div class="row ">
                <div class="col ">
                    all you need is <img src="{% static 'img/peace.png' %} " width="50px "> 2019 &copy;
                </div>

            </div>
        </div>

    </footer>


</body>

</html>